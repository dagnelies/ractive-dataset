<!doctype html>
<html lang='en'>
<head>
	<meta charset='utf-8'>
	<title>Datagrid plugin for Ractive.js</title>

	<!-- CSS -->
	<link href='http://fonts.googleapis.com/css?family=Voltaire' rel='stylesheet' type='text/css'>
	<link rel='stylesheet' href='style.css'>
	
	<!-- random data generator -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/chance/0.5.6/chance.min.js'></script>
	
	<!-- Ractive -->
	<script src='http://cdn.ractivejs.org/latest/ractive.js'></script>
	<script src='ractive-dataset.js'></script>
	
	<style>
		* {
			box-sizing: border-box;
		}
		
		table {
			width: 100%;
			table-layout: fixed;
		}
		
		table input {
			width: 100%;
		}
		
		.table-scroll {
			width: 100%;
			overflow: auto;
			max-height: 500px;
		}

		
	</style>
</head>

<body>

	<h1>Datatable : filterable, pageable, sortable, (selectable? onedit? onremove?)</h1>
	
	<div id='demo' class='clearfix'></div>

	
	<h3>Disclaimer: some features do not work with others.</h3>
	
	<p>Inline editting and adding cannot be applied with lists that are at the same time filtered or sorted.
	The problem is obvious: while typing, your row may disappear or be moved away because of filtering/sorting.
	In order to edit/add rows in a filtered/sorted table, you have to make this "at once" through another form outside the grid.</p>
	
	<p>The same applies with filtering/sorting and moving elements in a list up and down. It's the first, or the latter, but combining both does not make sense.</p>
	
	<!-- Demo template -->
	<script id='demo-template' type='text/ractive'>
		<p><button onclick="addRandomData(100)">Add 100 entries</button><button onclick="addRandomData(10000)">Add 10,000 entries !!!</button></p>
		<p>Search: <input value="{{filter}}" /></p>
		<p>Sort by: <select value="{{sortby}}">
			<option></option>
			<option>first_name</option>
			<option>last_name</option>
			<option>email</option>
			<option>address</option>
		</select></p>
		<p>Rows per page: <input type="number" step="1" value="{{perpage}}" /></p>
		<p>Entries: {{users.length}}</p>
		
		<hr/>

		<table>
			<thead>
				<tr>
					<th>First Name</th>
					<th>Last Name</th>
					<th>EMail</th>
					<th>Address</th>
				</tr>
			</thead>
			<tbody>
				<dataset data="{{users}}" filter="{{filter}}" sortby="{{sortby}}" from="{{(page-1)*perpage}}" to="{{page*perpage}}" count="{{count}}">
					<tr>
						<td>{{.first_name}}</td>
						<td>{{.last_name}}</td>
						<td>{{.email}}</td>
						<td>{{.address}}</td>
					</tr>
				</dataset>
			</tbody>
		</table>
		<div style="float: right">
			{{#if count > perpage}}
				{{#if page > 1}}
					<a href="#1" on-click="set('page', 1)">&lt;&lt;</a>
					<a href="#{{page-1}}" on-click="set('page', page-1)">&lt;</a>
				{{/if}}
				Page: <input type="number" step="1" min="1" max="1000" value="{{page}}" style="width:50px;" /> of {{pagecount}}
				<div style="display:inline-block; width:80px;">
				{{#if page*perpage < count}}
					<a href="#{{page+1}}" on-click="set('page', page+1)">&gt;</a>
					<a href="#{{pagecount}}" on-click="set('page', pagecount)">&gt;&gt;</a>
				{{/if}}
				</div>
			{{/if}}
		</div>
	</script>



	<!-- Demo code -->
	<script id='demo-code'>
		ractive = new Ractive({
			el: 'demo',
			template: '#demo-template',
			data: {
				users: [],
				page: 1,
				filter: '',
				sortby: '',
				perpage: 20
			},
			computed: {
				pagecount: function() {
					return Math.ceil(this.get('count') / this.get('perpage'))
				}
			}
		});
		
		
		
		addRandomUsers(100)
	</script>

</body>
</html>
<!--
<datatable data="{{users}}">

<datatable class="" selected-class="" data="{{users}}" editable="true/false" sortable="true/false" selectable="single|multi|none" selected="{{}}" filterable="true/false" perpage="30" fields="a|b|c" headers="A|B|C" />
-->