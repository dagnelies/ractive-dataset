<!doctype html>
<html lang='en'>
<head>
	<meta charset='utf-8'>
	<title>Datagrid plugin for Ractive.js</title>

	<!-- CSS -->
	<link href='http://fonts.googleapis.com/css?family=Voltaire' rel='stylesheet' type='text/css'>
	<link rel='stylesheet' href='style.css'>
	
	<!-- random data generator -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/chance/0.5.6/chance.min.js'></script>
	
	<!-- Ractive -->
	<script src='http://cdn.ractivejs.org/latest/ractive.js'></script>
	<script src='ractive-dataset.js'></script>
	
	<style>
		* {
			box-sizing: border-box;
		}
		
		table {
			width: 100%;
			table-layout: fixed;
		}
		
		table input {
			width: 100%;
		}
		
		.table-scroll {
			width: 100%;
			overflow: auto;
			max-height: 500px;
		}

		
	</style>
</head>

<body>

	<div id='demo' class='clearfix'></div>

	<script id='demo-template' type='text/ractive'>
		<p>Search: <input value="{{filter}}" /></p>
		<p>Rows per page: <input type="number" step="1" value="{{perpage}}" /></p>
		<p>Entries: {{users.length}}</p>
		
		<hr/>

		<table>
			<thead>
				<tr>
					<th></th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>EMail</th>
					<th>Address</th>
				</tr>
			</thead>
			<tbody>
				<dataset data="{{users}}" filter="{{filter}}" sortby="{{sortby}}" from="{{(page-1)*perpage}}" to="{{page*perpage}}" count="{{count}}">
					<tr>
						<td>{{.selected}}</td>
						<td>{{.first_name}}</td>
						<td>{{.last_name}}</td>
						<td>{{.email}}</td>
						<td>{{.address}}</td>
					</tr>
				</dataset>
			</tbody>
		</table>
		<div style="float: right">
			{{#if count > perpage}}
				{{#if page > 1}}
					<a href="#1" on-click="set('page', 1)">&lt;&lt;</a>
					<a href="#{{page-1}}" on-click="set('page', page-1)">&lt;</a>
				{{/if}}
				Page: <input type="number" step="1" min="1" max="1000" value="{{page}}" style="width:50px;" /> of {{pagecount}}
				<div style="display:inline-block; width:80px;">
				{{#if page*perpage < count}}
					<a href="#{{page+1}}" on-click="set('page', page+1)">&gt;</a>
					<a href="#{{pagecount}}" on-click="set('page', pagecount)">&gt;&gt;</a>
				{{/if}}
				</div>
			{{/if}}
		</div>
	</script>



	<!-- Demo code -->
	<script id='demo-code'>
		ractive = new Ractive({
			el: 'demo',
			template: '#demo-template',
			data: {
				users: [],
				page: 1,
				filter: '',
				sortby: '',
				perpage: 20
			},
			computed: {
				pagecount: function() {
					return Math.ceil(this.get('count') / this.get('perpage'))
				}
			}
		});
		
		function addRandomData(num) {
			var added = []
			for(var i=0; i < num; i++) {
				added.push({
					first_name: chance.first(),
					last_name: chance.last(),
					email: chance.email(),
					address: chance.address()
				});
			}
			var users = ractive.get('users')
			users = users.concat(added)
			ractive.set('users', users)
		}
		
		addRandomData(100)
	</script>

</body>
</html>
<!--
<datatable data="{{users}}">

<dataset data="{{users}}" sort="{{sortby}}" filter="{{filter}}" page="{{page}}" perpage="30" >
	<tr>
		<td><input value="{{.first_name}}" /></td>
		<td><input value="{{.last_name}}" /></td>
		<td><input value="{{.email}}" /></td>
		<td><input value="{{.address}}" /></td>
	</tr>
</dataset>

<datatable data="{{users}}" editable="true/false" sortable="true/false" selectable="single|multi|none" selected="{{}}" filterable="true/false" perpage="30" fields="a|b|c" headers="A|B|C" />

-->